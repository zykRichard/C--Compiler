# Lab4 实验报告

**姓名：周琰轲                                 学号：201850187**

## 功能

    本实验完成了实验讲义中要求的所有功能，通过了实验讲义中给出的所有样例.


## 设计特色


### 寄存器分配策略

    由于在Lab3中已经翻译出了三地址码，因此在大多数情况下只需要利用 t0, t1, t2三个寄存器即可完成计算任务。对于函数传参问题，在每次调整栈指针sp时，会使用t3暂时存储调用函数的栈顶，在寻找参数位置时只需要利用参数相对于t3的偏移量即可。


### 内存分配策略

    在实现中对所有的临时变量均会在栈中分配空间，每次对临时变量的更改都会重新更新栈中的数据。在对临时变量分配栈空间之前，会先扫一遍整个函数作用域，大致计算出函数将使用的栈空间大小，然后修正sp, fp寄存器来分配这样大小的栈空间。

    由于对于每一个临时变量都分配栈空间浪费了内存。考虑到有些临时变量的生存周期很短，内存分配策略还值得去进一步优化。


## 编译方式

    在Code目录下make parser得到相应的可执行文件parser。利用指令parser <file_name> <output_file>则可得到相应的翻译结果。
